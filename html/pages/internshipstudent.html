<!DOCTYPE html>
<html>
<head>
    <title>Available Internships</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="/dashboardstudent.html">Home</a></li>
            <li><a href="/profilestudent.html">Profile</a></li>
            <li><a href="/logout">Logout</a></li>
        </ul>
    </nav>
    <h1 class="section-heading">Available Internships</h1>
    <div class="search-container">
        <form action="/search_internships" method="POST" id="filterForm">
            <label>Location: <input type="text" name="location"></label><br>
            <label>Skills: <input type="text" name="skills"></label><br>
            <label>Min Salary: <input type="number" name="salary" step="0.01"></label><br>
            <button type="submit">Search</button>
        </form>
    </div>
    <div id="internshipList" class="internship-list"></div>
    <script src="/js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('/list_internships')
                .then(response => response.json())
                .then(data => {
                    const list = document.getElementById('internshipList');
                    list.innerHTML = data.map(intern => `
                        <div class="internship-card">
                            <h3>${intern.title}</h3>
                            <p>Location: ${intern.location}</p>
                            <p>Skills: ${intern.skills}</p>
                            <p>Salary: AED ${intern.salary}/month</p>
                            <a href="/applyinternship.html?internship_id=${intern.internship_id}" class="btn">Apply Now</a>
                        </div>
                    `).join('');
                })
                .catch(error => alert('Error loading internships'));
        });
    </script>
</body>
</html>